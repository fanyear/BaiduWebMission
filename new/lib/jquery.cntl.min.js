(function(e){e.fn.cntl=function(t){var n=e.extend({revealbefore:200,anim_class:"cntl-animate",onreveal:null},t);return this.each(function(){function o(){for(var r=0;r<t.length;r++){i[r]={};i[r]["top"]=e(t[r]).offset().top+n.revealbefore;i[r]["elm"]=e(t[r])}u()}function u(){var t=e(window).scrollTop();var o=t+e(window).height();for(var u=0;u<i.length;u++){if(i[u].top>t&&i[u].top<o){if(!i[u].elm.hasClass(n.anim_class)&&e.isFunction(n.onreveal)){n.onreveal.call(this,i[u].elm)}i[u].elm.addClass(n.anim_class);var a=i[u].elm.position().top;if(a>s){s=a}r.height(s)}}}var t=e(this).find(".cntl-state");var r=e(this).find(".cntl-bar-fill");var i=[];var s=0;e(window).on("scroll",u);e(window).on("load",o)})}})(jQuery)